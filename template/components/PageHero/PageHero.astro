---
/**
 * PageHero Component
 * Zeigt oberhalb einer Seite Titel, Headline und Beschreibung im gewünschten Layout.
 * Figma Referenz: Marketing Page Hero Block.
 */
import './PageHero.css';

interface Props {
  title?: string;
  headline?: string;
  description?: string;
  imageSrc?: string;
  imageAlt?: string;
  align?: 'start' | 'center' | 'end';
  layout?: 'stack' | 'split';
  imageSide?: 'left' | 'right';
  /**
   * Überschreibt die Headline Ebene. Standard ist 1 (h1). Werte werden auf 1..6 begrenzt.
   * Nutzung: <PageHero headlineLevel={2} ... /> erzeugt ein <h2> statt <h1>.
   */
  headlineLevel?: 1 | 2 | 3 | 4 | 5 | 6;
}
const {
  title,
  headline,
  description,
  imageSrc,
  imageAlt,
  align = 'center',
  layout = 'stack',
  imageSide = 'right',
  headlineLevel = 2,
} = Astro.props as Props;

// Clamp headline level to valid range (1..6)
const safeHeadlineLevel = Math.min(Math.max(headlineLevel, 1), 6);
const HeadingTag = `h${safeHeadlineLevel}` as keyof astroHTML.JSX.Tag;
---

{
  (title || headline || description || imageSrc) && (
    <div
      class="page-hero"
      data-align={align}
      data-layout={layout}
      data-image-side={imageSide}
      aria-label="Page introduction"
    >
      {layout === 'split' && imageSrc && imageSide === 'left' && (
        <div class="page-hero__media">
          <img src={imageSrc} alt={imageAlt || ''} loading="lazy" decoding="async" />
        </div>
      )}
      <div class="page-hero__content">
        {title && <p class="page-hero__title">{title}</p>}
        {headline && <HeadingTag class="page-hero__headline">{headline}</HeadingTag>}
        <span class="page-hero__underline" aria-hidden="true" />
        {description && <p class="page-hero__description">{description}</p>}
      </div>
      {layout === 'split' && imageSrc && imageSide === 'right' && (
        <div class="page-hero__media">
          <img src={imageSrc} alt={imageAlt || ''} loading="lazy" decoding="async" />
        </div>
      )}
      {layout === 'stack' && imageSrc && (
        <div class="page-hero__media">
          <img src={imageSrc} alt={imageAlt || ''} loading="lazy" decoding="async" />
        </div>
      )}
    </div>
  )
}
