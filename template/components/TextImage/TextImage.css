/* TextImage Component Styles (Figma-konform) */

.text-image {
	display: flex;
	flex-direction: row;
	gap: var(--db-spacing-fixed-3xl);
	height: 100%;
}

/* Image Position */
.text-image[data-image-position='top'],
.text-image[data-image-position='bottom'] {
	flex-direction: column;
	gap: var(--db-spacing-fixed-xl);
}

.text-image-image {
	flex: 1 0 0; /* Default 50% */
	position: relative;
	min-width: 0;
}

.text-image[data-image-position='top'] .text-image-image,
.text-image[data-image-position='left'] .text-image-image {
	order: 1;
	width: 100%;
}

.text-image[data-image-position='bottom'] .text-image-image,
.text-image[data-image-position='right'] .text-image-image {
	order: 2;
	width: 100%;
}

/* Content Column */
.text-image-content {
	display: flex;
	flex-direction: column;
	justify-content: center;
	gap: var(--db-spacing-fixed-sm); /* 12px spacing zwischen Title und Body */
	flex: 1 0 0; /* Default 50% in flex context */
	min-width: 0; /* verhindert overflow issues */
}

.text-image[data-image-position='top'] .text-image-content,
.text-image[data-image-position='left'] .text-image-content {
	order: 2;
}

.text-image[data-image-position='bottom'] .text-image-content,
.text-image[data-image-position='right'] .text-image-content {
	order: 1;
}

/* Body push bottom variant (slot/text wird nach unten gedrückt) */

/* Text Gap Variants */
.text-image[data-text-gap='sm'] .text-image-content {
	gap: var(--db-spacing-fixed-sm);
}

.text-image[data-text-gap='md'] .text-image-content {
	gap: var(--db-spacing-fixed-md);
}

.text-image[data-text-gap='lg'] .text-image-content {
	gap: var(--db-spacing-fixed-lg);
}

.text-image[data-text-gap='xl'] .text-image-content {
	gap: var(--db-spacing-fixed-xl);
}

.text-image[data-text-gap='2xl'] .text-image-content {
	gap: var(--db-spacing-fixed-2xl);
}

.text-image[data-text-gap='3xl'] .text-image-content {
	gap: var(--db-spacing-fixed-3xl);
}

/* Paragraph Spacing nur innerhalb der Komponente */
.text-image-text > p {
	margin: 0;
	max-width: var(--db-container-md);
}

.text-image-text > p + p {
	margin-block-start: var(--db-spacing-fixed-md);
}

/* Remove default first/last paragraph margins to avoid extra top/bottom spacing */
.text-image-text > p:first-child {
	margin-block-start: 0;
}

.text-image-text > p:last-child {
	margin-block-end: 0;
}

.text-image-image img {
	width: 100%;
	height: auto;
	display: block;
}

/* Default: show light, hide dark */
.text-image-image .lightmode-image {
	display: block;
}

.text-image-image .darkmode-image {
	display: none;
}

/* Global theme toggle via shell data-mode */
.db-shell[data-mode='dark'] .text-image .lightmode-image {
	display: none;
}

.db-shell[data-mode='dark'] .text-image .darkmode-image {
	display: block;
}

.db-shell[data-mode='light'] .text-image .lightmode-image {
	display: block;
}

.db-shell[data-mode='light'] .text-image .darkmode-image {
	display: none;
}

/* OS-level fallback when no explicit data-mode is present */
@media (prefers-color-scheme: dark) {
	.text-image .lightmode-image {
		display: none;
	}

	.text-image .darkmode-image {
		display: block;
	}
}

/* Rounded image opt-in */
.text-image-image img[data-rounded] {
	border-radius: var(--db-border-radius-xs);
	overflow: hidden;
}

/* ============================= */

/* Image Mask Variants           */

/* ============================= */

/* Basis Farb-Stopps über CSS Variablen für Wiederverwendbarkeit */

/* Sichtbarer Bereich -> voll opaque; Ausblendung -> transparent */
:root {
	--ti-mask-visible: rgb(0 0 0 / 100%);
	--ti-mask-invisible: rgb(0 0 0 / 0%);
}

/* Single direction fades */
img[data-mask='fade-right'] {
	mask-image: linear-gradient(to right, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
}

img[data-mask='fade-left'] {
	mask-image: linear-gradient(to left, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
}

img[data-mask='fade-top'] {
	mask-image: linear-gradient(to top, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
}

img[data-mask='fade-bottom'] {
	mask-image: linear-gradient(to bottom, var(--ti-mask-visible) 50%, var(--ti-mask-invisible) 100%);
}

/* Combined corner fades (two gradients) */

/* Bottom-Right */
img[data-mask='fade-bottom-right'] {
	--ti-mask-bottom: linear-gradient(
		to bottom,
		var(--ti-mask-visible) 50%,
		var(--ti-mask-invisible) 100%
	);
	--ti-mask-right: linear-gradient(
		to right,
		var(--ti-mask-visible) 20%,
		var(--ti-mask-invisible) 100%
	);

	mask-image: var(--ti-mask-bottom), var(--ti-mask-right);
	mask-composite: source-in;
	mask-composite: intersect;
}

/* Bottom-Left */
img[data-mask='fade-bottom-left'] {
	--ti-mask-bottom: linear-gradient(
		to bottom,
		var(--ti-mask-visible) 50%,
		var(--ti-mask-invisible) 100%
	);
	--ti-mask-left: linear-gradient(
		to left,
		var(--ti-mask-visible) 20%,
		var(--ti-mask-invisible) 100%
	);

	mask-image: var(--ti-mask-bottom), var(--ti-mask-left);
	mask-composite: source-in;
	mask-composite: intersect;
}

/* Top-Right */
img[data-mask='fade-top-right'] {
	--ti-mask-top: linear-gradient(to top, var(--ti-mask-visible) 50%, var(--ti-mask-invisible) 100%);
	--ti-mask-right: linear-gradient(
		to right,
		var(--ti-mask-visible) 20%,
		var(--ti-mask-invisible) 100%
	);

	mask-image: var(--ti-mask-top), var(--ti-mask-right);
	mask-composite: source-in;
	mask-composite: intersect;
}

/* Top-Left */
img[data-mask='fade-top-left'] {
	--ti-mask-top: linear-gradient(to top, var(--ti-mask-visible) 50%, var(--ti-mask-invisible) 100%);
	--ti-mask-left: linear-gradient(
		to left,
		var(--ti-mask-visible) 20%,
		var(--ti-mask-invisible) 100%
	);

	mask-image: var(--ti-mask-top), var(--ti-mask-left);
	mask-composite: source-in;
	mask-composite: intersect;
}

/* Ensure images with masks don't overflow their container visually */
img[data-mask] {
	overflow: hidden;
}

/* Layout Ratio Variants */

/* 66/33: Text breiter */
.text-image[data-image-width='33'] .text-image-content {
	flex: 2 1 0;
}

.text-image[data-image-width='33'] .text-image-image {
	flex: 1 1 0;
}

.text-image[data-image-width='66'] .text-image-content {
	flex: 1 1 0;
}

.text-image[data-image-width='66'] .text-image-image {
	flex: 2 1 0;
}

/* Align Varianten (optional) */
.text-image[data-content-align='start'] .text-image-content {
	justify-content: start;
}

.text-image[data-content-align='center'] .text-image-content {
	justify-content: center;
}

.text-image[data-content-align='end'] .text-image-content {
	justify-content: end;
}

/* Typographie entfernt – globale Styles sollen greifen */
.text-image-title {
	margin: 0;
}

/* Responsive Stack */
@media (width <= 767px) {
	.text-image {
		flex-direction: column;
		gap: var(--db-spacing-fixed-lg);
	}

	.text-image[data-image-position='left'] .text-image-image,
	.text-image[data-image-position='right'] .text-image-image {
		order: 2 !important;
		flex: 1 1 0 !important;
	}

	.text-image[data-image-position='left'] .text-image-content,
	.text-image[data-image-position='right'] .text-image-content {
		order: 1 !important;
		flex: 2 1 0 !important;
	}

	/* Mobile: textGap stets sm, egal welche Variante gewählt wurde */
	.text-image .text-image-content {
		gap: var(--db-spacing-fixed-sm) !important;
	}
}
