/* TextImage Component Styles (Figma-konform) */

.text-image {
  display: flex;
  align-items: center;
  gap: var(--db-spacing-fixed-2xl); /* 48px laut Figma */
}

/* Vertical Layout */
.text-image[data-layout="vertical"] {
  flex-direction: column;
  align-items: stretch;
  gap: var(--db-spacing-fixed-xl);
}
.text-image[data-layout="vertical"] .text-image__image { order: 1; width: 100%; }
.text-image[data-layout="vertical"] .text-image__content { order: 2; }
/* Force vertical ordering to override horizontal image position rules */
.text-image[data-layout="vertical"][data-image-position="image-left"] .text-image__image { order: 1 !important; }
.text-image[data-layout="vertical"][data-image-position="image-left"] .text-image__content { order: 2 !important; }
.text-image[data-layout="vertical"][data-image-position="image-right"] .text-image__image { order: 1 !important; }
.text-image[data-layout="vertical"][data-image-position="image-right"] .text-image__content { order: 2 !important; }
/* Neutralize flex ratios in vertical (stack) */
.text-image[data-layout="vertical"] .text-image__content,
.text-image[data-layout="vertical"] .text-image__image { flex: unset; }

/* Vertikal soll Verhältnis (text-wide) keinen Einfluss haben */
.text-image[data-layout="vertical"][data-layout-ratio="text-wide"] .text-image__content,
.text-image[data-layout="vertical"][data-layout-ratio="text-wide"] .text-image__image { flex: unset !important; }

/* Bildpositionierung über order */
.text-image[data-image-position="image-left"] .text-image__content { order: 2; }
.text-image[data-image-position="image-left"] .text-image__image { order: 1; }
.text-image[data-image-position="image-right"] .text-image__content { order: 1; }
.text-image[data-image-position="image-right"] .text-image__image { order: 2; }

/* Content Column */
.text-image__content {
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: var(--db-spacing-fixed-sm); /* 12px spacing zwischen Title und Body */
  flex: 1 0 0; /* Default 50% in flex context */
  min-width: 0; /* verhindert overflow issues */
}

/* Body push bottom variant (slot/text wird nach unten gedrückt) */
/* Text Gap Variants */
.text-image[data-text-gap="sm"] .text-image__content { gap: var(--db-spacing-fixed-sm); }
.text-image[data-text-gap="md"] .text-image__content { gap: var(--db-spacing-fixed-md); }
.text-image[data-text-gap="lg"] .text-image__content { gap: var(--db-spacing-fixed-lg); }
.text-image[data-text-gap="xl"] .text-image__content { gap: var(--db-spacing-fixed-xl); }
.text-image[data-text-gap="2xl"] .text-image__content { gap: var(--db-spacing-fixed-2xl); }
.text-image[data-text-gap="3xl"] .text-image__content { gap: var(--db-spacing-fixed-3xl); }

/* Auto: Body nach unten drücken */
.text-image[data-text-gap="auto"] .text-image__text { margin-top: auto; }
.text-image[data-text-gap="auto"] .text-image__content {
  flex: 1 1 auto;
  min-height: 100%;
}
.text-image[data-text-gap="auto"][data-layout="horizontal"] { align-items: stretch; }
.text-image[data-text-gap="auto"][data-layout="horizontal"] .text-image__content { justify-content: flex-start; }
.text-image[data-text-gap="auto"][data-layout="horizontal"] .text-image__image { display: flex; flex-direction: column; }
/* Im vertikalen Layout explizit volle Höhe innerhalb von Karten-Kontexten */
.cards-row-fixed .text-image[data-layout="vertical"][data-text-gap="auto"] {
  height: 100%;
}
.cards-row-fixed .text-image[data-layout="vertical"][data-text-gap="auto"] .text-image__content {
  flex: 1 1 auto;
}

/* Paragraph Spacing nur innerhalb der Komponente */
.text-image__text > p {
  margin: 0;
  max-width: 480px;
}

.text-image__text > p + p {
  margin-top: var(--db-spacing-fixed-md);
}

/* Remove default first/last paragraph margins to avoid extra top/bottom spacing */
.text-image__text > p:first-child { margin-top: 0; }
.text-image__text > p:last-child { margin-bottom: 0; }

/* Bildcontainer */
.text-image__image {
  flex: 1 0 0; /* Default 50% */
  position: relative;
  min-width: 0;
}

.text-image__image img {
  width: 100%;
  height: auto;
  display: block;
}

/* Rounded image opt-in */
.text-image__image img[data-rounded] {
  border-radius: var(--db-border-radius-xs);
  overflow: hidden;
}

/* ============================= */
/* Image Mask Variants           */
/* ============================= */
/* Basis Farb-Stopps über CSS Variablen für Wiederverwendbarkeit */
/* Sichtbarer Bereich -> voll opaque; Ausblendung -> transparent */
:root {
  --ti-mask-visible: rgba(0,0,0,1);
  --ti-mask-invisible: rgba(0,0,0,0);
}

/* Single direction fades */
img[data-mask="fade-right"] {
  -webkit-mask-image: linear-gradient(to right, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
  mask-image: linear-gradient(to right, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
}
img[data-mask="fade-left"] {
  -webkit-mask-image: linear-gradient(to left, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
  mask-image: linear-gradient(to left, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
}
img[data-mask="fade-top"] {
  -webkit-mask-image: linear-gradient(to top, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
  mask-image: linear-gradient(to top, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
}
img[data-mask="fade-bottom"] {
  -webkit-mask-image: linear-gradient(to bottom, var(--ti-mask-visible) 50%, var(--ti-mask-invisible) 100%);
  mask-image: linear-gradient(to bottom, var(--ti-mask-visible) 50%, var(--ti-mask-invisible) 100%);
}

/* Combined corner fades (two gradients) */
/* Bottom-Right */
img[data-mask="fade-bottom-right"] {
  --_ti-mask-bottom: linear-gradient(to bottom, var(--ti-mask-visible) 50%, var(--ti-mask-invisible) 100%);
  --_ti-mask-right: linear-gradient(to right, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
  -webkit-mask-image: var(--_ti-mask-bottom), var(--_ti-mask-right);
  mask-image: var(--_ti-mask-bottom), var(--_ti-mask-right);
  -webkit-mask-composite: source-in;
  mask-composite: intersect;
}
/* Bottom-Left */
img[data-mask="fade-bottom-left"] {
  --_ti-mask-bottom: linear-gradient(to bottom, var(--ti-mask-visible) 50%, var(--ti-mask-invisible) 100%);
  --_ti-mask-left: linear-gradient(to left, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
  -webkit-mask-image: var(--_ti-mask-bottom), var(--_ti-mask-left);
  mask-image: var(--_ti-mask-bottom), var(--_ti-mask-left);
  -webkit-mask-composite: source-in;
  mask-composite: intersect;
}
/* Top-Right */
img[data-mask="fade-top-right"] {
  --_ti-mask-top: linear-gradient(to top, var(--ti-mask-visible) 50%, var(--ti-mask-invisible) 100%);
  --_ti-mask-right: linear-gradient(to right, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
  -webkit-mask-image: var(--_ti-mask-top), var(--_ti-mask-right);
  mask-image: var(--_ti-mask-top), var(--_ti-mask-right);
  -webkit-mask-composite: source-in;
  mask-composite: intersect;
}
/* Top-Left */
img[data-mask="fade-top-left"] {
  --_ti-mask-top: linear-gradient(to top, var(--ti-mask-visible) 50%, var(--ti-mask-invisible) 100%);
  --_ti-mask-left: linear-gradient(to left, var(--ti-mask-visible) 20%, var(--ti-mask-invisible) 100%);
  -webkit-mask-image: var(--_ti-mask-top), var(--_ti-mask-left);
  mask-image: var(--_ti-mask-top), var(--_ti-mask-left);
  -webkit-mask-composite: source-in;
  mask-composite: intersect;
}

/* Ensure images with masks don't overflow their container visually */
img[data-mask] {
  overflow: hidden;
}

/* Layout Ratio Variants */
/* 66/33: Text breiter */
.text-image[data-layout-ratio="text-wide"] .text-image__content { flex: 2 1 0; }
.text-image[data-layout-ratio="text-wide"] .text-image__image { flex: 1 1 0; }

/* Wenn Bild links steht, bleibt Verhältnis gleich (Text bleibt 2fr) */
.text-image[data-layout-ratio="text-wide"][data-image-position="image-left"] .text-image__content { flex: 2 1 0; }
.text-image[data-layout-ratio="text-wide"][data-image-position="image-left"] .text-image__image { flex: 1 1 0; }

/* Align Varianten (optional) */
.text-image[data-align="start"] { align-items: flex-start; }
.text-image[data-align="center"] { align-items: center; }
.text-image[data-align="end"] { align-items: flex-end; }

/* Typographie entfernt – globale Styles sollen greifen */
.text-image__title { margin: 0; }

/* Responsive Stack */
@media (max-width: 767px) {
  .text-image[data-layout="horizontal"] {
    flex-direction: column;
    align-items: stretch;
    gap: var(--db-spacing-fixed-xl); /* etwas kompakter */
  }
  .text-image[data-layout="horizontal"] .text-image__image { order: 1 !important; }
  .text-image[data-layout="horizontal"] .text-image__content { order: 2 !important; }

  /* Mobile: textGap stets sm, egal welche Variante gewählt wurde */
  .text-image .text-image__content { gap: var(--db-spacing-fixed-sm) !important; }

}

/* ========================================= */
/* Vertical Cards inside .cards-row-fixed     */
/* Ziel: Bild oben, Textbereich unten bündig  */
/* ========================================= */
.cards-row-fixed .text-image[data-layout="vertical"] .text-image__content {
  margin-top: auto; /* schiebt den Content nach unten; ursprüngliches gap bleibt erhalten */
}
