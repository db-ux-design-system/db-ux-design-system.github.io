---
import { DBButton, DBStack, DBCard } from '@db-ux/react-core-components';
import './InteractiveDemo.css';

const items = Array.isArray(Astro.props.items) ? Astro.props.items : [];
const initialId = Astro.props.initialId;
const initialItem = (initialId && items.find((i) => i.id === initialId)) ?? items[0] ?? null;
---

{
  items.length === 0 || !initialItem ? null : (
    <div data-image-toggle-root>
      <DBStack style={{ overflow: 'unset' }}>
        <div style="padding: var(--db-spacing-fixed-2xs); background: var(--db-adaptive-bg-basic-level-1-default); border-radius: var(--db-border-radius-sm); border: var(--db-border-width-3xs) solid var(--db-adaptive-on-bg-basic-emphasis-60-default); position: sticky; top: var(--db-spacing-fixed-md); width: 100%; max-width: fit-content; margin: 0 auto;">
          <DBStack direction="row" gap="2x-small">
            <DBStack direction="row" gap="2x-small">
              {items.map((item) => (
                <DBButton
                  icon={item.icon}
                  variant={item.variant}
                  data-color={item.color}
                  data-image-toggle-button
                  data-image-id={item.id}
                  data-image-src={item.src}
                  data-image-alt={item.alt ?? item.label}
                  {...(item.id === initialItem.id ? { 'data-active': '' } : {})}
                >
                  {item.label}
                </DBButton>
              ))}
            </DBStack>
            <DBButton
              icon="moon"
              variant="ghost"
              noText={true}
              data-image-toggle-light
              aria-label="Switch to dark mode"
            />
            <DBButton
              icon="sun"
              variant="ghost"
              noText={true}
              data-image-toggle-dark
              aria-label="Switch to light mode"
            />
          </DBStack>
        </div>
        <DBCard spacing="none" style={{ overflow: 'hidden' }} data-image-card>
          <img
            data-image-toggle-target
            src={initialItem.src}
            alt={initialItem.alt ?? initialItem.label}
          />
        </DBCard>
      </DBStack>
    </div>
  )
}
<script src="./interactiveDemo.client.js"></script>
